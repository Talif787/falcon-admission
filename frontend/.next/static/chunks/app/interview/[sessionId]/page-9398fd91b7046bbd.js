(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[582],{464:function(e,s,t){Promise.resolve().then(t.bind(t,3852))},3852:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return g}});var a=t(7437),l=t(2265),r=t(9376),n=t(5956),i=t(1914),c=t(6680),o=t(6124),d=t(3471),m=t(498),u=t(4014),x=t(9064);let h=e=>e instanceof Error?e.message:"string"==typeof e?e:"Unexpected error";function g(){let e=String((0,r.useParams)().sessionId||""),s=(0,l.useMemo)(()=>"http://localhost:5000".replace(/\/$/,""),[]),[t,g]=(0,l.useState)([]),[b,p]=(0,l.useState)(""),[f,v]=(0,l.useState)(!1),[y,j]=(0,l.useState)(!0),[N,w]=(0,l.useState)(!1),[k,C]=(0,l.useState)(""),[S,E]=(0,l.useState)(""),[Z,P]=(0,l.useState)(""),[D,T]=(0,l.useState)(!1),I=(0,l.useRef)(null),_=(0,l.useRef)(null),F=(0,l.useCallback)(()=>{var e;null===(e=I.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},[]);(0,l.useEffect)(()=>{F()},[t,F]);let M=(0,l.useCallback)(async()=>{if(e)try{var t;j(!0);let a=await fetch("".concat(s,"/api/chat/").concat(e,"/init"),{method:"GET"}),l=null;try{l=await a.json()}catch(e){l=null}if(!a.ok||(null==l?void 0:l.success)===!1){x.ZP.error((null==l?void 0:l.message)||"Failed to initialize (HTTP ".concat(a.status,")"));return}let r=(null==l?void 0:null===(t=l.data)||void 0===t?void 0:t.message)||"Welcome!";g([{role:"assistant",content:r,timestamp:new Date}]);let n=r.toLowerCase();n.includes("business")&&n.includes("computer science")?T(!0):T(!1)}catch(e){console.error("Error initializing chat:",e),x.ZP.error(h(e)||"Failed to connect to server")}finally{j(!1)}},[s,e]);(0,l.useEffect)(()=>{M()},[M]);let O=(0,l.useCallback)(async(t,a)=>{var l,r,n,i,c;let o=(null!=t?t:b).trim();if(!o||f||N||!e)return;let d={role:"user",content:o,timestamp:new Date};g(e=>[...e,d]),p(""),v(!0);try{let t=await fetch("".concat(s,"/api/chat/").concat(e,"/message"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:o,program:a||Z})}),c=null;try{c=await t.json()}catch(e){c=null}if(!t.ok||(null==c?void 0:c.success)===!1){x.ZP.error((null==c?void 0:c.message)||"Failed to send (HTTP ".concat(t.status,")"));return}let d=(null==c?void 0:null===(l=c.data)||void 0===l?void 0:l.message)||"OK";g(e=>[...e,{role:"assistant",content:d,timestamp:new Date}]),(null==c?void 0:null===(r=c.data)||void 0===r?void 0:r.completed)&&(w(!0),C((null==c?void 0:null===(n=c.data)||void 0===n?void 0:n.outcome)||""),E((null==c?void 0:null===(i=c.data)||void 0===i?void 0:i.summary)||""))}catch(e){console.error("Error sending message:",e),x.ZP.error(h(e)||"Failed to send message")}finally{v(!1),null===(c=_.current)||void 0===c||c.focus()}},[s,b,f,N,e,Z]),H=(0,l.useCallback)(async e=>{P(e),T(!1),await O("I'm interested in the ".concat(e," program"),e)},[O]),z=(0,l.useCallback)(e=>{e.preventDefault(),O()},[O]),B=(0,l.useCallback)(e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),O())},[O]);return y?(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(n.Z,{className:"w-12 h-12 animate-spin text-blue-600 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Initializing interview..."})]})}):(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-50",children:[(0,a.jsx)("div",{className:"bg-white border-b border-gray-200 shadow-sm",children:(0,a.jsx)("div",{className:"max-w-4xl mx-auto px-4 py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"Falcon University"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Admission Interview"})]}),N&&(0,a.jsx)("div",{className:"flex items-center gap-2",children:"Meets Criteria"===k?(0,a.jsxs)("div",{className:"flex items-center gap-2 text-green-600",children:[(0,a.jsx)(i.Z,{className:"w-5 h-5"}),(0,a.jsx)("span",{className:"font-medium",children:"Eligible"})]}):(0,a.jsxs)("div",{className:"flex items-center gap-2 text-red-600",children:[(0,a.jsx)(c.Z,{className:"w-5 h-5"}),(0,a.jsx)("span",{className:"font-medium",children:"Not Eligible"})]})})]})})}),(0,a.jsxs)("div",{className:"max-w-4xl mx-auto p-4 h-[calc(100vh-80px)] flex flex-col",children:[(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto mb-4 space-y-4 bg-white rounded-lg shadow-sm p-4",children:[t.map((e,s)=>(0,a.jsxs)("div",{className:"flex gap-3 ".concat("user"===e.role?"flex-row-reverse":"flex-row"),children:[(0,a.jsx)("div",{className:"flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center ".concat("user"===e.role?"bg-blue-100":"bg-purple-100"),children:"user"===e.role?(0,a.jsx)(o.Z,{className:"w-5 h-5 text-blue-600"}):(0,a.jsx)(d.Z,{className:"w-5 h-5 text-purple-600"})}),(0,a.jsxs)("div",{className:"flex-1 max-w-[70%] ".concat("user"===e.role?"items-end":"items-start"),children:[(0,a.jsx)("div",{className:"rounded-lg px-4 py-2 ".concat("user"===e.role?"bg-blue-600 text-white":"bg-gray-100 text-gray-900"),children:(0,a.jsx)("p",{className:"text-sm whitespace-pre-wrap break-words",children:e.content})}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1 ".concat("user"===e.role?"text-right":"text-left"),children:(0,u.WU)(new Date(e.timestamp),"HH:mm")})]})]},s)),f&&(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("div",{className:"flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center bg-purple-100",children:(0,a.jsx)(d.Z,{className:"w-5 h-5 text-purple-600"})}),(0,a.jsx)("div",{className:"bg-gray-100 rounded-lg px-4 py-2",children:(0,a.jsxs)("div",{className:"flex gap-1",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),(0,a.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),(0,a.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})})]}),(0,a.jsx)("div",{ref:I})]}),D&&!N&&(0,a.jsxs)("div",{className:"mb-4 p-4 bg-white rounded-lg shadow-sm border border-blue-200",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900 mb-3",children:"Please select your program of interest:"}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("button",{onClick:()=>void H("Business"),className:"flex-1 px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium",children:"Business"}),(0,a.jsx)("button",{onClick:()=>void H("Computer Science"),className:"flex-1 px-4 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors font-medium",children:"Computer Science"})]})]}),N&&(0,a.jsxs)("div",{className:"mb-4 p-4 rounded-lg border ".concat("Meets Criteria"===k?"bg-green-50 border-green-200":"bg-red-50 border-red-200"),children:[(0,a.jsx)("p",{className:"text-sm font-medium mb-2 ".concat("Meets Criteria"===k?"text-green-900":"text-red-900"),children:"Interview Complete"}),(0,a.jsx)("p",{className:"text-sm ".concat("Meets Criteria"===k?"text-green-800":"text-red-800"),children:S}),(0,a.jsx)("a",{href:"/admin",className:"inline-block mt-3 px-4 py-2 bg-white border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 transition-colors",children:"Back to Admin Dashboard"})]}),!N&&!D&&(0,a.jsx)("form",{onSubmit:z,className:"bg-white rounded-lg shadow-sm p-4",children:(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("input",{ref:_,type:"text",value:b,onChange:e=>p(e.target.value),onKeyPress:B,placeholder:"Type your message...",disabled:f,className:"flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-100 disabled:cursor-not-allowed"}),(0,a.jsx)("button",{type:"submit",disabled:f||!b.trim(),className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors flex items-center gap-2",children:f?(0,a.jsx)(n.Z,{className:"w-5 h-5 animate-spin"}):(0,a.jsx)(m.Z,{className:"w-5 h-5"})})]})})]})]})}}},function(e){e.O(0,[439,980,971,117,744],function(){return e(e.s=464)}),_N_E=e.O()}]);