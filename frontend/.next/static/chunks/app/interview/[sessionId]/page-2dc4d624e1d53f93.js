(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[582],{464:function(e,s,t){Promise.resolve().then(t.bind(t,1998))},9376:function(e,s,t){"use strict";var a=t(5475);t.o(a,"useParams")&&t.d(s,{useParams:function(){return a.useParams}}),t.o(a,"useRouter")&&t.d(s,{useRouter:function(){return a.useRouter}})},1998:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return h}});var a=t(7437),r=t(9376),l=t(2265),n=t(5956),i=t(1914),c=t(6680),o=t(6124),d=t(3471);let m=(0,t(8301).Z)("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);var u=t(2093),x=t(9064);function h(){let e=(0,r.useParams)().sessionId,[s,t]=(0,l.useState)([]),[h,g]=(0,l.useState)(""),[b,p]=(0,l.useState)(!1),[f,y]=(0,l.useState)(!0),[j,w]=(0,l.useState)(!1),[N,v]=(0,l.useState)(""),[C,k]=(0,l.useState)(""),[S,Z]=(0,l.useState)(""),[P,D]=(0,l.useState)(!1),E=(0,l.useRef)(null),I=(0,l.useRef)(null),_=(0,l.useCallback)(async()=>{try{y(!0);let s=await fetch("http://localhost:5000/api/chat/".concat(e,"/init")),a=await s.json();a.success?(t([{role:"assistant",content:a.data.message,timestamp:new Date}]),a.data.message.toLowerCase().includes("business")&&a.data.message.toLowerCase().includes("computer science")&&D(!0)):x.ZP.error(a.message||"Failed to initialize chat")}catch(e){console.error("Error initializing chat:",e),x.ZP.error("Failed to connect to server")}finally{y(!1)}},[e]);(0,l.useEffect)(()=>{_()},[_]),(0,l.useEffect)(()=>{F()},[s]);let F=()=>{var e;null===(e=E.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},M=async e=>{Z(e),D(!1),await R("I'm interested in the ".concat(e," program"),e)},R=async(s,a)=>{let r=s||h.trim();if(!r||b||j)return;let l={role:"user",content:r,timestamp:new Date};t(e=>[...e,l]),g(""),p(!0);try{let s=await fetch("http://localhost:5000/api/chat/".concat(e,"/message"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:r,program:a||S})}),l=await s.json();if(l.success){let e={role:"assistant",content:l.data.message,timestamp:new Date};t(s=>[...s,e]),l.data.completed&&(w(!0),v(l.data.outcome),k(l.data.summary))}else x.ZP.error(l.message||"Failed to send message")}catch(e){console.error("Error sending message:",e),x.ZP.error("Failed to send message")}finally{var n;p(!1),null===(n=I.current)||void 0===n||n.focus()}};return f?(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(n.Z,{className:"w-12 h-12 animate-spin text-blue-600 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Initializing interview..."})]})}):(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-50",children:[(0,a.jsx)("div",{className:"bg-white border-b border-gray-200 shadow-sm",children:(0,a.jsx)("div",{className:"max-w-4xl mx-auto px-4 py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"Falcon University"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Admission Interview"})]}),j&&(0,a.jsx)("div",{className:"flex items-center gap-2",children:"Meets Criteria"===N?(0,a.jsxs)("div",{className:"flex items-center gap-2 text-green-600",children:[(0,a.jsx)(i.Z,{className:"w-5 h-5"}),(0,a.jsx)("span",{className:"font-medium",children:"Eligible"})]}):(0,a.jsxs)("div",{className:"flex items-center gap-2 text-red-600",children:[(0,a.jsx)(c.Z,{className:"w-5 h-5"}),(0,a.jsx)("span",{className:"font-medium",children:"Not Eligible"})]})})]})})}),(0,a.jsxs)("div",{className:"max-w-4xl mx-auto p-4 h-[calc(100vh-80px)] flex flex-col",children:[(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto mb-4 space-y-4 bg-white rounded-lg shadow-sm p-4",children:[s.map((e,s)=>(0,a.jsxs)("div",{className:"flex gap-3 ".concat("user"===e.role?"flex-row-reverse":"flex-row"),children:[(0,a.jsx)("div",{className:"flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center ".concat("user"===e.role?"bg-blue-100":"bg-purple-100"),children:"user"===e.role?(0,a.jsx)(o.Z,{className:"w-5 h-5 text-blue-600"}):(0,a.jsx)(d.Z,{className:"w-5 h-5 text-purple-600"})}),(0,a.jsxs)("div",{className:"flex-1 max-w-[70%] ".concat("user"===e.role?"items-end":"items-start"),children:[(0,a.jsx)("div",{className:"rounded-lg px-4 py-2 ".concat("user"===e.role?"bg-blue-600 text-white":"bg-gray-100 text-gray-900"),children:(0,a.jsx)("p",{className:"text-sm whitespace-pre-wrap break-words",children:e.content})}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1 ".concat("user"===e.role?"text-right":"text-left"),children:(0,u.WU)(new Date(e.timestamp),"HH:mm")})]})]},s)),b&&(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("div",{className:"flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center bg-purple-100",children:(0,a.jsx)(d.Z,{className:"w-5 h-5 text-purple-600"})}),(0,a.jsx)("div",{className:"bg-gray-100 rounded-lg px-4 py-2",children:(0,a.jsxs)("div",{className:"flex gap-1",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),(0,a.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),(0,a.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})})]}),(0,a.jsx)("div",{ref:E})]}),P&&!j&&(0,a.jsxs)("div",{className:"mb-4 p-4 bg-white rounded-lg shadow-sm border border-blue-200",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900 mb-3",children:"Please select your program of interest:"}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("button",{onClick:()=>M("Business"),className:"flex-1 px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium",children:"Business"}),(0,a.jsx)("button",{onClick:()=>M("Computer Science"),className:"flex-1 px-4 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors font-medium",children:"Computer Science"})]})]}),j&&(0,a.jsxs)("div",{className:"mb-4 p-4 rounded-lg border ".concat("Meets Criteria"===N?"bg-green-50 border-green-200":"bg-red-50 border-red-200"),children:[(0,a.jsx)("p",{className:"text-sm font-medium mb-2 ".concat("Meets Criteria"===N?"text-green-900":"text-red-900"),children:"Interview Complete"}),(0,a.jsx)("p",{className:"text-sm ".concat("Meets Criteria"===N?"text-green-800":"text-red-800"),children:C}),(0,a.jsx)("a",{href:"/admin",className:"inline-block mt-3 px-4 py-2 bg-white border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 transition-colors",children:"Back to Admin Dashboard"})]}),!j&&!P&&(0,a.jsx)("form",{onSubmit:e=>{e.preventDefault(),R()},className:"bg-white rounded-lg shadow-sm p-4",children:(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("input",{ref:I,type:"text",value:h,onChange:e=>g(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),R())},placeholder:"Type your message...",disabled:b,className:"flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-100 disabled:cursor-not-allowed"}),(0,a.jsx)("button",{type:"submit",disabled:b||!h.trim(),className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors flex items-center gap-2",children:b?(0,a.jsx)(n.Z,{className:"w-5 h-5 animate-spin"}):(0,a.jsx)(m,{className:"w-5 h-5"})})]})})]})]})}}},function(e){e.O(0,[439,402,971,117,744],function(){return e(e.s=464)}),_N_E=e.O()}]);